name: CentOS Ansible
version: 1
formatVersion: 1
inputs:
  application:
    type: string
    title: Application Level
    enum:
      - os-with-latest-patches.yml
      - postgresql.yml
      - mariadb.yml
resources:
  CentOS Ansible:
    type: Cloud.vSphere.Machine
    properties:
      imageRef: TEMP-CentOS7-for-vRA/snap-for-vRA8
      cpuCount: 2
      totalMemoryMB: 2048
      customizationSpec: vra-linux-custom
  Ansible-1:
    type: Cloud.Ansible
    properties:
      host: '${resource["CentOS Ansible"].*}'
      osType: linux
      playbook-used: '${input.application}'
      account: CF-ANSIBLE01
      username: root
      privateKeyFile: /root/.ssh/id_rsa
      playbooks:
        provision:
          - '/root/playbooks/${input.application}'
